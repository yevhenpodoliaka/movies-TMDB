var e={gallery:document.querySelector("#gallery"),libary:document.querySelector("#libary"),homeBtn:document.querySelector("#homeBtn"),libaryBtn:document.querySelector("#libaryBtn"),form:document.querySelector("#form"),libaryOptions:document.querySelector("#libaryOptions"),decrementBtn:document.querySelector("#decrementBtn"),incrementBtn:document.querySelector("#incrementBtn"),backdrop:document.querySelector("#backdrop"),addToQueue:document.querySelector("#add-to-queue"),addWached:document.querySelector("#add-wached")};var t=class{addInWatchedList(e){this.watchedList.push(e),localStorage.setItem("watchedList",JSON.stringify(this.watchedList))}addInQueuedList(e){this.queuedList.push(e),localStorage.setItem("queuedList",JSON.stringify(this.queuedList))}constructor(){var e,t;this.watchedList=null!==(e=JSON.parse(localStorage.getItem("watchedList")))&&void 0!==e?e:[],this.queuedList=null!==(t=JSON.parse(localStorage.getItem("queuedList")))&&void 0!==t?t:[]}};new t;function a({id:e,backdrop_path:t,budget:a,popularity:n,title:i,genres:s,homepage:o,original_title:r}){return`<div class="card" id=${e}>\n    <button class="close-modal" data-action="close-modal">close</button>\n    <div class="img-wrap">\n      <img class="card__img" src=https://image.tmdb.org/t/p/w500/${t} alt="cinema" />\n    </div>\n    <div class="description-wrap">\n      <h2 class="card__title">${i}</h2>\n\n      <div class="card__info">\n        <div class="info-key">\n          <p>Vote/votes</p>\n          <p>Popularity</p>\n          <p>Original Title</p>\n          <p>Genre</p>\n        </div>\n        <div class="info-value">\n          <p><span>7.3</span>/<span>1260</span></p>\n          <p>${n}</p>\n          <p>${r}</p>\n          <p>Western</p>\n        </div>\n      </div>\n      <h3>About</h3>\n      <p class="card__about">\n        Four of the West’s most infamous outlaws assemble to steal a huge stash\n        of gold from the most corrupt settlement of the gold rush towns. But not\n        all goes to plan one is killed and the other three escapes with bags of\n        gold hide out in the abandoned gold mine where they happen across\n        another gang of three – who themselves were planning to hit the very\n        same bank! As tensions rise, things go from bad to worse as they realise\n        the bags of gold are filled with lead... they’ve been double crossed –\n        but by who and how?\n      </p>\n      <div class="card__option">\n        <button data-action="add-wached">add to Watched</button>\n        <button data-action="add-queue">add to queue</button>\n      </div>\n    </div>\n  </div>`}function n(e){return e.map((({id:e,title:t,poster_path:a,release_date:n,vote_average:i})=>`<li class="gallery__item" id="${e}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${a} alt="" class="poster">\n    <p class="title">${t}</p>\n    <p class="date">Date: ${n}</p>\n    <p class="rating">Rating :${i}</p>\n    </div>\n</li>`)).join("")}var i=class{async fetchPopular(){this.url="https://api.themoviedb.org/3/discover/movie?api_key=b6201d5209ec246f483ea16253167a90&sort_by=popularity.desc",console.log(this);const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchByWord(e){this.url=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&query=${e}`,console.log(this);const t=await fetch(this.url+`&page=${this.currentPage}`);return(await t.json()).results}async fetchByUrl(){const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchById(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=b6201d5209ec246f483ea16253167a90`);return await t.json()}incrementPage(){this.currentPage+=1,console.log(this)}decrementPage(){this.currentPage>1&&(this.currentPage-=1,console.log(this))}constructor(){this.url=null,this.currentPage=1,this.currentId=null}};async function s(){const e=await o.fetchPopular(),t=await n(e);return await d(t)}window.addEventListener("DOMContentLoaded",s),e.homeBtn.addEventListener("click",(function(){e.form.classList.remove("visually-hidden"),e.libaryOptions.classList.add("visually-hidden"),e.gallery.classList.remove("visually-hidden"),e.libary.classList.add("visually-hidden"),s()})),e.libaryBtn.addEventListener("click",(function(){e.form.classList.add("visually-hidden"),e.libaryOptions.classList.remove("visually-hidden"),e.gallery.classList.add("visually-hidden"),e.libary.classList.remove("visually-hidden")})),e.form.addEventListener("submit",(async function(e){e.preventDefault(),o.currentPage=1;const t=e.target.elements.input.value,a=await o.fetchByWord(t),i=await n(a);return await d(i)})),e.decrementBtn.addEventListener("click",(async function(){await o.decrementPage(),await c(),window.scroll({top:0,behavior:"smooth"})})),e.incrementBtn.addEventListener("click",(async function(){await o.incrementPage(),await c(),window.scroll({top:1,behavior:"smooth"})})),e.gallery.addEventListener("click",(async function(t){const n=t.target.getAttribute("id");if(o.currentId=n,t.target.classList.contains("gallery__item")){const t=await o.fetchById(n);e.backdrop.classList.remove("visually-hidden");const s=await a(t);await(i=s,void(e.backdrop.innerHTML=i))}var i;r.watchedList.includes(n),console.log(e),await(document.addEventListener("keydown",p),e.backdrop.addEventListener("click",h),e.backdrop.addEventListener("click",l),void e.backdrop.addEventListener("click",u))}));const o=new i,r=new t;async function c(){const e=await o.fetchByUrl(),t=await n(e);return await d(t)}function d(t){e.gallery.innerHTML=t}function l(e){"add-queue"===e.target.dataset.action&&(r.addInQueuedList(o.currentId),console.log(localStorage.getItem("queuedList")))}function u(e){"add-wached"===e.target.dataset.action&&(r.addInWatchedList(o.currentId),console.log(localStorage.getItem("watchedList")))}function h(e){"close-modal"!==e.target.dataset.action&&e.currentTarget!==e.target||g()}function p(e){"Escape"===e.code&&g()}function g(){e.backdrop.classList.add("visually-hidden"),document.removeEventListener("keydown",p),e.backdrop.removeEventListener("click",h),e.backdrop.removeEventListener("click",l),e.backdrop.removeEventListener("click",u)}
//# sourceMappingURL=index.65ff6142.js.map
