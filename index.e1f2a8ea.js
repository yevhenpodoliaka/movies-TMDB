class t{fetchGenres(t){return fetch(`https://api.themoviedb.org/3/genre/${t}/list?api_key=b6201d5209ec246f483ea16253167a90&language=en-US`).then((t=>t.json()))}async fetchTrending(){const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=b6201d5209ec246f483ea16253167a90&page=${this.page}`;return(await fetch(t)).json()}async fetchSearchMovie(){const t=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;return(await fetch(t)).json()}async fetchMovieDetails(t){const e=`https://api.themoviedb.org/3/movie/${t}?api_key=b6201d5209ec246f483ea16253167a90&language=en-US&append_to_response=videos`,n=await fetch(e),a=await n.json();return console.log(a.videos.results[0].key),console.log(a),a}incrementPage(){this.page+=1}set pageNumber(t){this.page=t}resetPage(){this.page=1}get query(){return this.searchQuery}set query(t){this.searchQuery=t}get movieId(){return this.searchId}set movieId(t){this.searchId=t}constructor(){this.searchQuery="",this.page=1,this.searchId=""}}var e=function(t){return t.map((({id:t,title:e,poster_path:n,release_date:a,vote_average:o})=>`<li class="gallery__item" data-id="${t}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${n} alt="" class="poster">\n    <p class="title">${e}</p>\n    <p class="date">Date: ${a}</p>\n    <p class="rating">Rating :${o}</p>\n    </div>\n</li>`)).join("")};function n(t,e){return t<4&&e>7?`<button class="pagination__btn">1</button>\n  <button class="pagination__btn">2</button>\n  <button class="pagination__btn">3</button>\n  <button class="pagination__btn">4</button>\n  <button class="pagination__btn">5</button>\n  <button class="pagination__btn">6</button>\n  <button class="last-page">${e}</button>\n  <button class="next-page">&rarr;</button>`:t>=+e-5?` <button class="prev-page">&larr;</button>\n<button class="pagination__btn">1</button>\n<button class="pagination__btn">${+e-5}</button>\n<button class="pagination__btn">${+e-4}</button>\n<button class="pagination__btn">${+e-3}</button>\n<button class="pagination__btn">${+e-2}</button>\n<button class="pagination__btn">${+e-1}</button>\n<button class="pagination__btn">${+e}</button>`:t>3&&e>7&&t!==e?` <button class="prev-page">&larr;</button>\n  <button class="pagination__btn">1</button>\n  <button class="pagination__btn">${+t-2}</button>\n  <button class="pagination__btn">${+t-1}</button>\n  <button class="pagination__btn">${+t}</button>\n  <button class="pagination__btn">${+t+1}</button>\n  <button class="pagination__btn">${+t+2}</button>\n  <button class="last-page">${e}</button>\n  <button class="next-page">&rarr;</button>`:t===e?` <button class="prev-page">&larr;</button>\n<button class="pagination__btn">1</button>\n<button class="pagination__btn">${+e-5}</button>\n<button class="pagination__btn">${+e-4}</button>\n<button class="pagination__btn">${+e-3}</button>\n<button class="pagination__btn">${+e-2}</button>\n<button class="pagination__btn">${+e-1}</button>\n<button class="pagination__btn">${+e}</button>`:void 0}function a(t,e){document.querySelectorAll(".pagination__btn").forEach((e=>{t===Number(e.textContent)&&e.classList.add("current-page")}))}function o(){const t=document.querySelector(".gallery__option");document.querySelector(".prev-page"),document.querySelector(".next-page"),document.querySelector(".last-page");t.addEventListener("click",l),t.addEventListener("click",i),t.addEventListener("click",c),t.addEventListener("click",s)}function s(t){t.target.classList.contains("last-page")&&(r.page=+t.target.textContent,u(),window.scroll({top:0,behavior:"smooth"}),a(r.page))}function i(t){t.target.classList.contains("next-page")&&(r.page+=3,u(),window.scroll({top:0,behavior:"smooth"}),a(r.page))}function c(t){t.target.classList.contains("prev-page")&&(r.page-=3,console.log(r.page),u(),window.scroll({top:0,behavior:"smooth"}),a(r.page))}function l(t){t.target.classList.contains("pagination__btn")&&(r.page=+t.target.textContent,console.log(r.page),u(),window.scroll({top:0,behavior:"smooth"}),a(t.target.textContent))}const r=new t;async function u(){const t=document.querySelector(".gallery"),s=document.querySelector(".gallery__option"),i=await r.fetchTrending(),c=await e(i.results);t.innerHTML=c,s.innerHTML=n(i.page,i.total_pages),a(i.page),o()}var d=function({poster_path:t,videos:e,genres:n=[],vote_count:a,vote_average:o,original_title:s,popularity:i,title:c,overview:l}){const r=e.results[0].key,u=n.map((t=>t.name));return console.log(u),`<div class="modal">\n    <button class="modal__close" data-action="close-modal">&#10006;</button>\n        <div class="modal__card">\n        <div class="modal__content">\n        <button   class="modal__btn-close-trailer visually-hidden">&#10006;</button> \n    <iframe class="video-frame visually-hidden" src="https://www.youtube.com/embed/${r}"\n    frameborder = '0';\n    title = 'YouTube video player';\n      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n      allowfullscreen></iframe>\n    <button class="modal__btn-play">play</button>\n    <img class="modal__img" src="https://image.tmdb.org/t/p/w500/${t}" alt="cinema" />\n  </div>\n\n  \n    <div class="modal__description-wrap">\n      <h2 class="modal__title">${c}</h2>\n      <table class="modal__info">\n  <tr>\n    <td class="modal__info-key">Vote/votes</td>\n    <td "modal__info-value">\n    <span class="modal__info-value--accent">${o}</span>\n     <span class="modal__info-value--slash">/ </span\n    ><span class="modal__info-value--grey">${a}</span>\n    </td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Popularity</td>\n    <td "modal__info-value">${i}</td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Original Title</td>\n    <td "modal__info-value">${s}</td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Genre</td>\n    <td "modal__info-value">${u}</td>\n  </tr>\n</table>\n    \n      <h3 class="modal__about-title">About</h3>\n      <p class="modal__about-text">\n        ${l}\n      </p>\n      <div class="modal__option">\n        <button class="btn-add-wached" data-action="add-wached">add to Watched</button>\n        <button class="btn-add-queue" data-action="add-queue">add to queue</button>\n      </div>\n    </div>\n    </div>\n  </div>`};function g(t){const e=document.querySelector(".backdrop"),n=document.querySelector(".modal__img"),a=document.querySelector(".video-frame"),o=document.querySelector(".modal__btn-play"),s=document.querySelector(".modal__btn-close-trailer");t.target.classList.contains("modal__btn-play")&&(n.classList.toggle("visually-hidden"),a.classList.toggle("visually-hidden"),o.classList.toggle("visually-hidden"),s.classList.toggle("visually-hidden"),e.removeEventListener("click",g),e.addEventListener("click",p),console.log("on btn player click"))}function p(t){const e=document.querySelector(".backdrop"),n=document.querySelector(".modal__img"),a=document.querySelector(".video-frame"),o=document.querySelector(".modal__btn-play"),s=document.querySelector(".modal__btn-close-trailer");t.target.classList.contains("modal__btn-close-trailer")&&(n.classList.toggle("visually-hidden"),a.classList.toggle("visually-hidden"),o.classList.toggle("visually-hidden"),s.classList.toggle("visually-hidden"),e.removeEventListener("click",p),e.addEventListener("click",g),console.log("on btn player click"))}const b={getWatchedList(){try{return JSON.parse(localStorage.getItem("watched-list"))}catch(t){console.log(t)}},setWatchedList(t){localStorage.setItem("watched-list",JSON.stringify(t))},getQueueList(){try{return JSON.parse(localStorage.getItem("queue-list"))}catch(t){console.log(t)}},setQueueList(t){localStorage.setItem("queue-list",JSON.stringify(t))},isWatchedListEmpty(){const t=this.getWatchedList();return!t||0===t.length},isQueueListEmpty(){const t=this.getQueueList();return!t||0===t.length},isMovieInWatchedList(t){if(this.isWatchedListEmpty())return!1;return!!this.getWatchedList().includes(t)},isMovieInQueueList(t){if(this.isQueueListEmpty())return!1;return!!this.getQueueList().includes(t)},addMovieToWatchedList(t){if(this.isWatchedListEmpty())localStorage.setItem("watched-list",JSON.stringify([t]));else{const e=this.getWatchedList();e.push(t),this.setWatchedList(e)}},addMovieToQueueList(t){if(this.isQueueListEmpty())localStorage.setItem("queue-list",JSON.stringify([t]));else{const e=this.getQueueList();e.push(t),this.setQueueList(e)}},removeMovieFromWatchedList(t){const e=this.getWatchedList().filter((e=>e!==t));this.setWatchedList(e)},removeMovieFromQueueList(t){const e=this.getQueueList().filter((e=>e!==t));this.setQueueList(e)},clearWatchedList(){localStorage.removeItem("watched-list")},clearQueueList(){localStorage.removeItem("queue-list")}};function _(t){if("add-queue"===t.target.dataset.action){const e=document.querySelector(".btn-add-queue"),n=document.querySelector(".btn-add-wached"),a=t.currentTarget.getAttribute("id");if(b.isMovieInQueueList(a)?b.removeMovieFromQueueList(a):b.addMovieToQueueList(a),e.classList.toggle("isActive"),b.isMovieInQueueList(a)?e.textContent="delete to queue":e.textContent="add to queue",console.log(b.getQueueList()),!e.disabled&&!n.disabled)return n.disabled=!0;if(n.disabled)return n.disabled=!1}}function m(t){if("add-wached"===t.target.dataset.action){const e=document.querySelector(".btn-add-wached"),n=document.querySelector(".btn-add-queue"),a=t.currentTarget.getAttribute("id");if(b.isMovieInWatchedList(a)?b.removeMovieFromWatchedList(a):b.addMovieToWatchedList(a),e.classList.toggle("isActive"),b.isMovieInWatchedList(a)?e.textContent="delete to wached":e.textContent="add to watched",console.log(b.getWatchedList()),!n.disabled&&!e.disabled)return n.disabled=!0;if(n.disabled)return n.disabled=!1}}function h(){let t=document.querySelector(".backdrop");t.classList.remove("visually-hidden"),document.addEventListener("keydown",y),t.addEventListener("click",L),t.addEventListener("click",_),t.addEventListener("click",m),t.addEventListener("click",g)}function v(){let t=document.querySelector(".backdrop");t.classList.add("visually-hidden"),document.removeEventListener("keydown",y),t.removeEventListener("click",L),t.removeEventListener("click",_),t.removeEventListener("click",m),t.removeEventListener("click",g)}function y(t){"Escape"===t.code&&v()}function L(t){"close-modal"!==t.target.dataset.action&&t.currentTarget!==t.target||v()}const f=new t;async function S(t){document.querySelector(".backdrop").setAttribute("id",t);try{const e=await f.fetchMovieDetails(t),n=await d(e);await async function(t){document.querySelector(".backdrop").innerHTML=t}(n),h()}catch(t){return alert("error"),void console.log(t)}const e=document.querySelector(".btn-add-queue"),n=document.querySelector(".btn-add-wached");b.isMovieInQueueList(t)&&(e.textContent="delete to queue",e.classList.toggle("isActive"),n.disabled=!0),b.isMovieInWatchedList(t)&&(n.textContent="delete to Wached",n.classList.toggle("isActive"),e.disabled=!0)}async function q(t){let e=document.querySelector(".backdrop");if(e=document.querySelector(".backdrop"),t.target.classList.contains("gallery__item")){const e=t.target.dataset.id;await S(e)}}function w(){const t=document.querySelector(".search-list__option");document.querySelector(".prev-page"),document.querySelector(".next-page"),document.querySelector(".last-page");t.addEventListener("click",M),t.addEventListener("click",$),t.addEventListener("click",E),t.addEventListener("click",k)}function k(t){t.target.classList.contains("last-page")&&(console.log(W),W.page=+t.target.textContent,Q(),window.scroll({top:0,behavior:"smooth"}),a(W.page))}function $(t){t.target.classList.contains("next-page")&&(console.log(W),W.page+=3,Q(),window.scroll({top:0,behavior:"smooth"}),a(W.page))}function E(t){t.target.classList.contains("prev-page")&&(W.page-=3,console.log(W),Q(),window.scroll({top:0,behavior:"smooth"}),a(W.page))}function M(t){t.target.classList.contains("pagination__btn")&&(W.page=+t.target.textContent,console.log(W),Q(),window.scroll({top:0,behavior:"smooth"}),a(t.target.textContent))}async function Q(){document.querySelector(".gallery"),document.querySelector(".gallery__option").innerHTML="";const t=document.querySelector(".search-list__option"),o=await W.fetchSearchMovie();if(0===o.results.length)return void alert("Search result not successful. Enter the correct movie name and ");const s=await e(o.results);var i;await(i=s,void(document.querySelector(".gallery").innerHTML=i)),t.innerHTML=n(o.page,o.total_pages),a(o.page),w()}const W=new t;async function x(t){const e=document.querySelector(".form__input");t.preventDefault(),W.searchQuery=t.target.elements.input.value,W.resetPage(),Q(),t.target.elements.input.value="",e.setAttribute("placeholder",W.searchQuery)}function I(){document.querySelector(".form__input").setAttribute("placeholder","search");document.querySelector(".search-list__option").innerHTML="";u()}new t;const T=document.querySelector(".container");window.addEventListener("DOMContentLoaded",(function(){T.innerHTML='<header class="header">\n  <nav class="header__nav">\n    <button class="header__btn-home" type="button">Home</button>\n    <button class="header__btn-library" type="button">My Library</button>\n  </nav>\n  <form class="form">\n    <input class="form__input" type="text" name="input" placeholder="search" />\n  </form>\n  <div class="library__options visually-hidden">\n    <button class="library__options-watched">Watched</button>\n    <button class="library__options-queue">Queue</button>\n  </div>\n</header>\n<main>\n  <ul class="gallery"></ul>\n  <ul class="library visually-hidden"></ul>\n\n  <div class="gallery__option pagination"></div>\n  <div class="search-list__option pagination"></div>\n  <div class="pagination"></div>\n \n</main>\n<footer>\n  <span>© 2022 | All Rights Reserved |</span>\n</footer>\n<div class="backdrop visually-hidden"></div>',u();document.querySelector(".gallery").addEventListener("click",q),document.querySelector(".form").addEventListener("submit",x),document.querySelector(".header__btn-home").addEventListener("click",I)}));
//# sourceMappingURL=index.e1f2a8ea.js.map
