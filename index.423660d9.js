function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequireb382;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequireb382=i),i.register("kyEFX",(function(t,n){var a,i;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var r={};a=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},i=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.423660d9.js","3f3Gn":"cinema.9bc895e8.jpg"}'));var r={gallery:document.querySelector("#gallery"),libary:document.querySelector("#libary"),homeBtn:document.querySelector("#homeBtn"),libaryBtn:document.querySelector("#libaryBtn"),form:document.querySelector("#form"),libaryOptions:document.querySelector("#libaryOptions"),decrementBtn:document.querySelector("#decrementBtn"),incrementBtn:document.querySelector("#incrementBtn"),backdrop:document.querySelector(".backdrop"),addToQueue:null,addWached:null};var o=class{addInWatchedList(e){this.watchedList.push(e),localStorage.setItem("watchedList",JSON.stringify(this.watchedList))}addInQueuedList(e){this.queuedList.push(e),localStorage.setItem("queuedList",JSON.stringify(this.queuedList))}constructor(){var e,t;this.watchedList=null!==(e=JSON.parse(localStorage.getItem("watchedList")))&&void 0!==e?e:[],this.queuedList=null!==(t=JSON.parse(localStorage.getItem("queuedList")))&&void 0!==t?t:[]}};new o;var s=function(e){return e.map((({id:e,title:t,poster_path:n,release_date:a,vote_average:i})=>`<li class="gallery__item" id="${e}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${n} alt="" class="poster">\n    <p class="title">${t}</p>\n    <p class="date">Date: ${a}</p>\n    <p class="rating">Rating :${i}</p>\n    </div>\n</li>`)).join("")};const d="https://api.themoviedb.org/3/discover/movie?api_key=b6201d5209ec246f483ea16253167a90&sort_by=popularity.desc";(async function(){const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b6201d5209ec246f483ea16253167a90&language=en-US");return await e.json()})().then(console.log);var c=class{async fetchByUrl(){const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchByWord(e){this.url=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&query=${e}`,console.log(this);const t=await fetch(this.url+`&page=${this.currentPage}`);return(await t.json()).results}incrementPage(){this.currentPage+=1}decrementPage(){this.currentPage>1&&(this.currentPage-=1)}async fetchById(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=b6201d5209ec246f483ea16253167a90`);return await t.json()}constructor(){this.homeUrl=d,this.url=d,this.currentPage=1}};new URL(i("kyEFX").resolve("3f3Gn"),import.meta.url).toString();const l=new c,u=new o;function h(e){"Escape"===e.code&&v()}function m(e){if(console.log(r),"add-queue"===e.target.dataset.action){const t=e.currentTarget.getAttribute("id");u.addInQueuedList(t),console.log(localStorage.getItem("queuedList"))}}function g(e){if(console.log(r),"add-wached"===e.target.dataset.action){const t=e.currentTarget.getAttribute("id");u.addInWatchedList(t),console.log(localStorage.getItem("watchedList"))}}function p(e){"close-modal"!==e.target.dataset.action&&e.currentTarget!==e.target||v()}function v(){r.backdrop.classList.add("visually-hidden"),document.removeEventListener("keydown",h),r.backdrop.removeEventListener("click",p),r.backdrop.removeEventListener("click",m),r.backdrop.removeEventListener("click",g)}var y=async function(e){r.backdrop.setAttribute("id",e);const t=await l.fetchById(e),n=await function({poster_path:e,budget:t,genres:n=[],homepage:a,vote_count:i,vote_average:r,original_title:o,popularity:s,title:d,overview:c}){const l=n.map((e=>e.name));return console.log(l),`<div class="modal">\n    <button class="modal__close" data-action="close-modal">&#10006;</button>\n \n      <img class="modal__img" src=https://image.tmdb.org/t/p/w500/${e} alt="cinema" />\n  \n    <div class="modal__description-wrap">\n      <h2 class="modal__title">${d}</h2>\n      <table class="moal__info">\n  <tr>\n    <td>Vote/votes</td>\n    <td><span>${r}</span>/<span>${i}</span></td>\n  </tr>\n  <tr>\n    <td>Popularity</td>\n    <td>${s}</td>\n  </tr>\n  <tr>\n    <td>Original Title</td>\n    <td>${o}</td>\n  </tr>\n  <tr>\n    <td>Genre</td>\n    <td>${l}</td>\n  </tr>\n</table>\n    \n      <h3 class="modal__about-title">About</h3>\n      <p class="modal__about-text">\n        ${c}\n      </p>\n      <div class="modal__option">\n        <button class="btn-add-wached" data-action="add-wached">add to Watched</button>\n        <button class="btn-add-queue" data-action="add-queue">add to queue</button>\n      </div>\n    </div>\n  </div>`}(t);await async function(e){r.backdrop.innerHTML=e}(n),r.addToQueue=document.querySelector(".btn-add-queue"),r.addWached=document.querySelector(".btn-add-wached"),u.watchedList.includes(e)&&(r.addWached.textContent="film in wached List"),u.queuedList.includes(e)&&(r.addToQueue.textContent="film in queue List"),r.backdrop.classList.remove("visually-hidden"),document.addEventListener("keydown",h),r.backdrop.addEventListener("click",p),r.backdrop.addEventListener("click",m),r.backdrop.addEventListener("click",g)};window.addEventListener("DOMContentLoaded",w),r.homeBtn.addEventListener("click",(function(){r.form.classList.remove("visually-hidden"),r.libaryOptions.classList.add("visually-hidden"),r.gallery.classList.remove("visually-hidden"),r.libary.classList.add("visually-hidden"),f.url=f.homeUrl,w()})),r.libaryBtn.addEventListener("click",(function(){r.form.classList.add("visually-hidden"),r.libaryOptions.classList.remove("visually-hidden"),r.gallery.classList.add("visually-hidden"),r.libary.classList.remove("visually-hidden")})),r.form.addEventListener("submit",(async function(e){e.preventDefault(),f.currentPage=1;const t=e.target.elements.input.value,n=await f.fetchByWord(t);if(0===n.length)return void alert("Search result not successful. Enter the correct movie name and ");const a=await s(n);return await L(a)})),r.decrementBtn.addEventListener("click",(async function(){await f.decrementPage(),await w(),window.scroll({top:0,behavior:"smooth"})})),r.incrementBtn.addEventListener("click",(async function(){await f.incrementPage(),await w(),window.scroll({top:1,behavior:"smooth"})})),r.gallery.addEventListener("click",(async function(e){const t=e.target.getAttribute("id");e.target.classList.contains("gallery__item")&&await y(t);b.watchedList.includes(t),await console.log(r)}));const f=new c,b=new o;async function w(){console.log(f);const e=await f.fetchByUrl(),t=await s(e);return await L(t)}function L(e){r.gallery.innerHTML=e}
//# sourceMappingURL=index.423660d9.js.map
