{"mappings":"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","sources":["src/js/refs.js","src/js/local-storage.js","src/js/markup.js","src/js/api-servise.js","src/js/app.js"],"sourcesContent":["export default {\n  gallery: document.querySelector('#gallery'),\n  libary: document.querySelector('#libary'),\n  homeBtn: document.querySelector('#homeBtn'),\n  libaryBtn: document.querySelector('#libaryBtn'),\n  form: document.querySelector('#form'),\n  libaryOptions: document.querySelector('#libaryOptions'),\n  decrementBtn: document.querySelector('#decrementBtn'),\n  incrementBtn: document.querySelector('#incrementBtn'),\n  backdrop: document.querySelector('#backdrop'),\n  addToQueue: document.querySelector('#add-to-queue'),\n  addWached: document.querySelector('#add-wached'),\n};\n","import refs from './refs';\n\nclass Storage {\n  constructor() {\n    this.watchedList = JSON.parse(localStorage.getItem('watchedList')) ?? [];\n    this.queuedList = JSON.parse(localStorage.getItem('queuedList')) ?? [];\n  }\n  addInWatchedList(id) {\n    this.watchedList.push(id);\n    localStorage.setItem('watchedList', JSON.stringify(this.watchedList));\n  }\n\n  addInQueuedList(id) {\n    this.queuedList.push(id);\n    localStorage.setItem('queuedList', JSON.stringify(this.queuedList));\n  }\n}\n\nexport default Storage;\n","const IMG_URL = 'https://image.tmdb.org/t/p/w500/';\nimport Storage from './local-storage';\nconst storage = new Storage();\n// backdrop_path: \"/egoyMDLqCxzjnSrWOz50uLlJWmD.jpg\"\n// belongs_to_collection: {id: 720879, name: \"Sonic the Hedgehog Collection\", poster_path: \"/rEC1pkQ1UbX7USRkVIrt2Nk7hlC.jpg\",…}\n// budget: 110000000\n// genres: [{id: 28, name: \"Action\"}, {id: 12, name: \"Adventure\"}, {id: 10751, name: \"Family\"},…]\n// homepage: \"https://www.sonicthehedgehogmovie.com\"\n// id: 675353\n// imdb_id: \"tt12412888\"\n// original_language: \"en\"\n// original_title: \"Sonic the Hedgehog 2\"\n// overview: \"After settling in Green Hills, Sonic is eager to prove he has what it takes to be a true hero. His test comes when Dr. Robotnik returns, this time with a new partner, Knuckles, in search for an emerald that has the power to destroy civilizations. Sonic teams up with his own sidekick, Tails, and together they embark on a globe-trotting journey to find the emerald before it falls into the wrong hands.\"\n// popularity: 3201.969\n// poster_path: \"/6DrHO1jr3qVrViUO6s6kFiAGM7.jpg\"\n// production_companies: [{id: 4, logo_path: \"/gz66EfNoYPqHTYI4q9UEN4CbHRc.png\", name: \"Paramount\", origin_country: \"US\"},…]\n// production_countries: [{iso_3166_1: \"JP\", name: \"Japan\"}, {iso_3166_1: \"US\", name: \"United States of America\"}]\n// release_date: \"2022-03-30\"\n// revenue: 393000000\n// runtime: 122\n// spoken_languages: [{english_name: \"English\", iso_639_1: \"en\", name: \"English\"}]\n// status: \"Released\"\n// tagline: \"Welcome to the next level.\"\n// title: \"Sonic the Hedgehog 2\"\n// video: false\n// vote_average: 7.7\n// vote_count: 2274\nfunction createMarkupCard({\n  id,\n  backdrop_path,\n  budget,\n  popularity,\n  title,\n  genres,\n  homepage,\n  original_title,\n}) {\n  return `<div class=\"card\" id=${id}>\n    <button class=\"close-modal\" data-action=\"close-modal\">close</button>\n    <div class=\"img-wrap\">\n      <img class=\"card__img\" src=${IMG_URL}${backdrop_path} alt=\"cinema\" />\n    </div>\n    <div class=\"description-wrap\">\n      <h2 class=\"card__title\">${title}</h2>\n\n      <div class=\"card__info\">\n        <div class=\"info-key\">\n          <p>Vote/votes</p>\n          <p>Popularity</p>\n          <p>Original Title</p>\n          <p>Genre</p>\n        </div>\n        <div class=\"info-value\">\n          <p><span>7.3</span>/<span>1260</span></p>\n          <p>${popularity}</p>\n          <p>${original_title}</p>\n          <p>Western</p>\n        </div>\n      </div>\n      <h3>About</h3>\n      <p class=\"card__about\">\n        Four of the West’s most infamous outlaws assemble to steal a huge stash\n        of gold from the most corrupt settlement of the gold rush towns. But not\n        all goes to plan one is killed and the other three escapes with bags of\n        gold hide out in the abandoned gold mine where they happen across\n        another gang of three – who themselves were planning to hit the very\n        same bank! As tensions rise, things go from bad to worse as they realise\n        the bags of gold are filled with lead... they’ve been double crossed –\n        but by who and how?\n      </p>\n      <div class=\"card__option\">\n        <button data-action=\"add-wached\">add to Watched</button>\n        <button data-action=\"add-queue\">add to queue</button>\n      </div>\n    </div>\n  </div>`;\n}\n\n// function createMarkupCard({ id, backdrop_path, budget, genres, homepage }) {\n//   return `<div class=\"card\" id=${id}>\n//   <button data-action=\"close-modal\">close</button>\n//   <button data-action=\"add-queue\">Add to queue</button>\n//   <button data-action=\"add-wached\">Add Wached</button>\n//   <img src=${IMG_URL}${backdrop_path} alt=\"\">\n\n// </div>`;\n// }\n\nfunction createMarkupList(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        title,\n        poster_path,\n        release_date,\n        vote_average,\n      }) => `<li class=\"gallery__item\" id=\"${id}\">\n      <div class=\"info-wrap\">\n    <img src= ${IMG_URL}${poster_path} alt=\"\" class=\"poster\">\n    <p class=\"title\">${title}</p>\n    <p class=\"date\">Date: ${release_date}</p>\n    <p class=\"rating\">Rating :${vote_average}</p>\n    </div>\n</li>`\n    )\n    .join('');\n}\n\nexport { createMarkupCard, createMarkupList };\n","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '?api_key=b6201d5209ec246f483ea16253167a90';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500/';\nconst URL = BASE_URL + 'discover/movie' + API_KEY + '&sort_by=popularity.desc';\nclass Search {\n  constructor() {\n    this.url = null;\n    this.currentPage = 1;\n    this.currentId = null;\n  }\n\n  async fetchPopular() {\n    this.url = URL;\n    console.log(this);\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n\n  async fetchByWord(word) {\n    this.url = BASE_URL + 'search/movie' + API_KEY + `&query=${word}`;\n    console.log(this);\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n  async fetchByUrl() {\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n  async fetchById(movieId) {\n    const response = await fetch(BASE_URL + `movie/${movieId}` + API_KEY);\n    const data = await response.json();\n    return data;\n  }\n\n  incrementPage() {\n    this.currentPage += 1;\n    console.log(this);\n  }\n  decrementPage() {\n    if (this.currentPage > 1) {\n      this.currentPage -= 1;\n      console.log(this);\n    }\n  }\n}\n\nexport default Search;\n","import { createMarkupCard, createMarkupList } from './markup';\nimport refs from './refs';\nimport Search from './api-servise';\nimport Storage from './local-storage';\n\nwindow.addEventListener('DOMContentLoaded', onHomePage);\nrefs.homeBtn.addEventListener('click', onClickBtnHome);\nrefs.libaryBtn.addEventListener('click', onClickBtnLibary);\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.decrementBtn.addEventListener('click', onDecrementBtnClick);\nrefs.incrementBtn.addEventListener('click', onIncrementBtnClick);\nrefs.gallery.addEventListener('click', onCardClick);\n\nasync function onHomePage() {\n  const data = await search.fetchPopular();\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nconst search = new Search();\nconst storage = new Storage();\n\nasync function renderList() {\n  const data = await search.fetchByUrl();\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nfunction onClickBtnHome() {\n  refs.form.classList.remove('visually-hidden');\n  refs.libaryOptions.classList.add('visually-hidden');\n  refs.gallery.classList.remove('visually-hidden');\n  refs.libary.classList.add('visually-hidden');\n  onHomePage();\n}\n\nfunction onClickBtnLibary() {\n  refs.form.classList.add('visually-hidden');\n  refs.libaryOptions.classList.remove('visually-hidden');\n  refs.gallery.classList.add('visually-hidden');\n  refs.libary.classList.remove('visually-hidden');\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  search.currentPage = 1;\n  const query = e.target.elements.input.value;\n  const data = await search.fetchByWord(query);\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nasync function onDecrementBtnClick() {\n  await search.decrementPage();\n  await renderList();\n  window.scroll({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\nasync function onIncrementBtnClick() {\n  await search.incrementPage();\n  await renderList();\n  window.scroll({\n    top: 1,\n    behavior: 'smooth',\n  });\n}\n\nfunction uppendMarkapGalleryList(string) {\n  refs.gallery.innerHTML = string;\n}\nfunction uppendMarkapModal(string) {\n  refs.backdrop.innerHTML = string;\n}\n// ------Modal----------------\nasync function onCardClick(e) {\n  const filmId = e.target.getAttribute('id');\n  search.currentId = filmId;\n  if (e.target.classList.contains('gallery__item')) {\n    const data = await search.fetchById(filmId);\n\n    refs.backdrop.classList.remove('visually-hidden');\n    const markup = await createMarkupCard(data);\n    await uppendMarkapModal(markup);\n  }\n  if (storage.watchedList.includes(filmId)) {\n  }\n  console.log(refs);\n  await openModal();\n}\n\nfunction onBtnAddToQueueClick(e) {\n  if (e.target.dataset.action === 'add-queue') {\n    storage.addInQueuedList(search.currentId);\n    console.log(localStorage.getItem('queuedList'));\n  }\n}\nfunction onBtnAddWachedClick(e) {\n  if (e.target.dataset.action === 'add-wached') {\n    storage.addInWatchedList(search.currentId);\n    console.log(localStorage.getItem('watchedList'));\n  }\n}\nfunction onBtnCloseModalClick(e) {\n  if (\n    e.target.dataset.action === 'close-modal' ||\n    e.currentTarget === e.target\n  ) {\n    closeModal();\n  }\n}\nfunction onCloseEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  refs.backdrop.classList.add('visually-hidden');\n  document.removeEventListener('keydown', onCloseEsc);\n  refs.backdrop.removeEventListener('click', onBtnCloseModalClick);\n  refs.backdrop.removeEventListener('click', onBtnAddToQueueClick);\n  refs.backdrop.removeEventListener('click', onBtnAddWachedClick);\n}\nfunction openModal() {\n  document.addEventListener('keydown', onCloseEsc);\n  refs.backdrop.addEventListener('click', onBtnCloseModalClick);\n  refs.backdrop.addEventListener('click', onBtnAddToQueueClick);\n  refs.backdrop.addEventListener('click', onBtnAddWachedClick);\n}\n\nfunction createCard() {\n  const card = document.createElement(div);\n}\n"],"names":["$ee27a4d7c64fc8c4$export$2e2bcd8739ae039","gallery","document","querySelector","libary","homeBtn","libaryBtn","form","libaryOptions","decrementBtn","incrementBtn","backdrop","addToQueue","addWached","$8125d1701b78b442$export$2e2bcd8739ae039","addInWatchedList","id","this","watchedList","push","localStorage","setItem","JSON","stringify","addInQueuedList","queuedList","constructor","ref","ref1","parse","getItem","$263aef85a4d00bfb$export$98f2023ceafec56e","backdrop_path","budget","popularity","title","genres","homepage","original_title","$263aef85a4d00bfb$export$c8b63e9afa679154","arr","map","poster_path","release_date","vote_average","join","$73417752614b6260$export$2e2bcd8739ae039","async","url","$73417752614b6260$var$BASE_URL","console","log","response","fetch","currentPage","json","results","word","movieId","incrementPage","decrementPage","currentId","$ce77af30fc9a6e63$var$onHomePage","data","$ce77af30fc9a6e63$var$search","fetchPopular","markup","$ce77af30fc9a6e63$var$uppendMarkapGalleryList","window","addEventListener","classList","remove","add","e","preventDefault","query","target","elements","input","value","fetchByWord","$ce77af30fc9a6e63$var$renderList","scroll","top","behavior","filmId","getAttribute","contains","fetchById","string","innerHTML","$ce77af30fc9a6e63$var$storage","includes","$ce77af30fc9a6e63$var$onCloseEsc","$ce77af30fc9a6e63$var$onBtnCloseModalClick","$ce77af30fc9a6e63$var$onBtnAddToQueueClick","$ce77af30fc9a6e63$var$onBtnAddWachedClick","fetchByUrl","dataset","action","currentTarget","$ce77af30fc9a6e63$var$closeModal","code","removeEventListener"],"version":3,"file":"index.65ff6142.js.map"}