var t={gallery:document.querySelector(".gallery"),pagination:document.querySelector(".pagination"),homeBtn:document.querySelector(".header__btn-home"),form:document.querySelector(".form"),backdrop:document.querySelector(".backdrop"),addToQueue:null,addWached:null};var e=class{addInWatchedList(t){this.watchedList.push(t),localStorage.setItem("watchedList",JSON.stringify(this.watchedList))}addInQueuedList(t){this.queuedList.push(t),localStorage.setItem("queuedList",JSON.stringify(this.queuedList))}constructor(){var t,e;this.watchedList=null!==(t=JSON.parse(localStorage.getItem("watchedList")))&&void 0!==t?t:[],this.queuedList=null!==(e=JSON.parse(localStorage.getItem("queuedList")))&&void 0!==e?e:[]}};new e;var n=function(t){return t.map((({id:t,title:e,poster_path:n,release_date:a,vote_average:i})=>`<li class="gallery__item" id="${t}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${n} alt="" class="poster">\n    <p class="title">${e}</p>\n    <p class="date">Date: ${a}</p>\n    <p class="rating">Rating :${i}</p>\n    </div>\n</li>`)).join("")};const a=new e;function i(t){"Escape"===t.code&&r()}function o(e){if(console.log(t),"add-queue"===e.target.dataset.action){const t=e.currentTarget.getAttribute("id");a.addInQueuedList(t),console.log(localStorage.getItem("queuedList"))}}function s(e){if(console.log(t),"add-wached"===e.target.dataset.action){const t=e.currentTarget.getAttribute("id");a.addInWatchedList(t),console.log(localStorage.getItem("watchedList"))}}function c(t){"close-modal"!==t.target.dataset.action&&t.currentTarget!==t.target||r()}function r(){t.backdrop.classList.add("visually-hidden"),document.removeEventListener("keydown",i),t.backdrop.removeEventListener("click",c),t.backdrop.removeEventListener("click",o),t.backdrop.removeEventListener("click",s)}var d=async function(e){t.backdrop.setAttribute("id",e);const n=await b.fetchMovieDetails(e),r=await function({poster_path:t,budget:e,genres:n=[],homepage:a,vote_count:i,vote_average:o,original_title:s,popularity:c,title:r,overview:d}){const l=n.map((t=>t.name));return console.log(l),`<div class="modal">\n    <button class="modal__close" data-action="close-modal">&#10006;</button>\n \n      <img class="modal__img" src=https://image.tmdb.org/t/p/w500/${t} alt="cinema" />\n  \n    <div class="modal__description-wrap">\n      <h2 class="modal__title">${r}</h2>\n      <table class="modal__info">\n  <tr>\n    <td class="modal__info-key">Vote/votes</td>\n    <td "modal__info-value"><span class="modal__info-value--accent">${o}</span>/<span     class="modal__info-key--accent">${i}</span></td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Popularity</td>\n    <td "modal__info-value">${c}</td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Original Title</td>\n    <td "modal__info-value">${s}</td>\n  </tr>\n  <tr>\n    <td class="modal__info-key">Genre</td>\n    <td "modal__info-value">${l}</td>\n  </tr>\n</table>\n    \n      <h3 class="modal__about-title">About</h3>\n      <p class="modal__about-text">\n        ${d}\n      </p>\n      <div class="modal__option">\n        <button class="btn-add-wached" data-action="add-wached">add to Watched</button>\n        <button class="btn-add-queue" data-action="add-queue">add to queue</button>\n      </div>\n    </div>\n  </div>`}(n);await async function(e){t.backdrop.innerHTML=e}(r),t.addToQueue=document.querySelector(".btn-add-queue"),t.addWached=document.querySelector(".btn-add-wached"),a.watchedList.includes(e)&&(t.addWached.textContent="film in wached List"),a.queuedList.includes(e)&&(t.addToQueue.textContent="film in queue List"),t.backdrop.classList.remove("visually-hidden"),document.addEventListener("keydown",i),t.backdrop.addEventListener("click",c),t.backdrop.addEventListener("click",o),t.backdrop.addEventListener("click",s)};function l(e,n){console.log(e),e>=7?t.decrementBtn.classList.remove("visually-hidden"):t.decrementBtn.classList.add("visually-hidden"),e>n-6?t.incrementBtn.classList.add("visually-hidden"):t.incrementBtn.classList.remove("visually-hidden"),t.paginationBtn.forEach((t=>{Number(t.textContent)===e?t.classList.add("current-page"):t.classList.remove("current-page")}))}function u(e,n){const a=function(t,e){return` <button class="prev-btn visually-hidden"  data-number="${t-6}">prew list</button>\n      <button class="pangination__btn current-page">${t}</button>\n      <button class="pangination__btn ">${t+1}</button>\n      <button class="pangination__btn" >${t+2}</button>\n      <button class="pangination__btn ">${t+3}</button>\n      <button class="pangination__btn ">${t+4}</button>\n      <button class="pangination__btn ">${t+5}</button>\n      <button class="last-page">${e}</button>\n      <button class="next-btn" data-number="${t+6}">next list</button>`}(e,n);!function(e){t.pagination.innerHTML=e}(a),t.paginationBtn=document.querySelectorAll(".pangination__btn"),t.decrementBtn=document.querySelector(".prev-btn"),t.incrementBtn=document.querySelector(".next-btn"),t.paginationLastPage=document.querySelector(".last-page"),t.pagination.addEventListener("click",h),t.pagination.addEventListener("click",p),t.pagination.addEventListener("click",m),t.pagination.addEventListener("click",g),l(e,n)}function g(t){if(t.target.classList.contains("last-page")){let e=t.target.textContent;u(e,e)}}function p(e){if(e.target.classList.contains("next-btn")){let e=0;t.paginationBtn.forEach((t=>{t.textContent=Number(t.textContent)+6,t.classList.contains("current-page")&&(e=Number(t.textContent)),l(e)}))}}function m(e){if(e.target.classList.contains("prev-btn")){let e=0;t.paginationBtn.forEach((t=>{t.textContent=Number(t.textContent)-6,t.classList.contains("current-page")&&(e=Number(t.textContent)),console.log(e),l(e)}))}}function h(t){t.target.classList.contains("pangination__btn")&&l(Number(t.target.textContent))}const b=new class{fetchGenres(t){return fetch(`https://api.themoviedb.org/3/genre/${t}/list?api_key=b6201d5209ec246f483ea16253167a90&language=en-US`).then((t=>t.json()))}async fetchTrending(){const t=`https://api.themoviedb.org/3/trending/all/day?api_key=b6201d5209ec246f483ea16253167a90&page=${this.page}`;return(await fetch(t)).json()}async fetchSearchMovie(){const t=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&language=en-US&query=${this.searchQuery}&page=${this.page}&include_adult=false`;return(await fetch(t)).json()}async fetchMovieDetails(t){const e=`https://api.themoviedb.org/3/movie/${t}?api_key=b6201d5209ec246f483ea16253167a90&language=en-US`;return(await fetch(e)).json()}incrementPage(){this.page+=1}set pageNumber(t){this.page=t}resetPage(){this.page=1}get query(){return this.searchQuery}set query(t){this.searchQuery=t}get movieId(){return this.searchId}set movieId(t){this.searchId=t}constructor(){this.searchQuery="",this.page=1,this.searchId=""}};function v(e){t.gallery.innerHTML=e}async function _(){const t=await b.fetchTrending(),e=await n(t.results);await v(e),u(t.page,t.total_pages)}function v(e){t.gallery.innerHTML=e}window.addEventListener("DOMContentLoaded",_),t.homeBtn.addEventListener("click",(function(){b.resetPage(),_()})),t.form.addEventListener("submit",(async function(t){t.preventDefault(),b.searchQuery=t.target.elements.input.value;const e=await b.fetchSearchMovie();if(0===e.results.length)return void alert("Search result not successful. Enter the correct movie name and ");const a=await n(e.results);await v(a),u(e.page,e.total_pages)})),t.gallery.addEventListener("click",(async function(t){const e=t.target.getAttribute("id");t.target.classList.contains("gallery__item")&&await d(e)}));
//# sourceMappingURL=index.a4e5b083.js.map
