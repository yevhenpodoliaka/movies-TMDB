var e={gallery:document.querySelector("#gallery"),libary:document.querySelector("#libary"),homeBtn:document.querySelector("#homeBtn"),libaryBtn:document.querySelector("#libaryBtn"),form:document.querySelector("#form"),libaryOptions:document.querySelector("#libaryOptions"),decrementBtn:document.querySelector("#decrementBtn"),incrementBtn:document.querySelector("#incrementBtn"),backdrop:document.querySelector("#backdrop"),addToQueue:document.querySelector("#add-to-queue"),addWached:document.querySelector("#add-wached")};var t=class{addInWatchedList(e){this.watchedList.push(e),localStorage.setItem("watchedList",JSON.stringify(this.watchedList))}addInQueuedList(e){this.queuedList.push(e),localStorage.setItem("queuedList",JSON.stringify(this.queuedList))}constructor(){var e,t;this.watchedList=null!==(e=JSON.parse(localStorage.getItem("watchedList")))&&void 0!==e?e:[],this.queuedList=null!==(t=JSON.parse(localStorage.getItem("queuedList")))&&void 0!==t?t:[]}};const a=new t;function n({id:e,backdrop_path:t,budget:n,genres:i,homepage:r}){return console.log(a),`<div class="card" id=${e}>\n  <button data-action="close-modal">close</button>\n  <button data-action="add-queue">Add to queue</button>\n  <button data-action="add-wached">Add Wached</button>\n  <img src=https://image.tmdb.org/t/p/w500/${t} alt="">\n\n</div>`}function i(e){return e.map((({id:e,title:t,poster_path:a,release_date:n,vote_average:i})=>`<li class="gallery__item" id="${e}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${a} alt="" class="poster">\n    <p class="title">${t}</p>\n    <p class="date">Date: ${n}</p>\n    <p class="rating">Rating :${i}</p>\n    </div>\n</li>`)).join("")}var r=class{async fetchPopular(){this.url="https://api.themoviedb.org/3/discover/movie?api_key=b6201d5209ec246f483ea16253167a90&sort_by=popularity.desc",console.log(this);const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchByWord(e){this.url=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&query=${e}`,console.log(this);const t=await fetch(this.url+`&page=${this.currentPage}`);return(await t.json()).results}async fetchByUrl(){const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchById(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=b6201d5209ec246f483ea16253167a90`);return await t.json()}incrementPage(){this.currentPage+=1,console.log(this)}decrementPage(){this.currentPage>1&&(this.currentPage-=1,console.log(this))}constructor(){this.url=null,this.currentPage=1,this.currentId=null}};async function c(){const e=await s.fetchPopular(),t=await i(e);return await l(t)}window.addEventListener("DOMContentLoaded",c),e.homeBtn.addEventListener("click",(function(){e.form.classList.remove("visually-hidden"),e.libaryOptions.classList.add("visually-hidden"),e.gallery.classList.remove("visually-hidden"),e.libary.classList.add("visually-hidden"),c()})),e.libaryBtn.addEventListener("click",(function(){e.form.classList.add("visually-hidden"),e.libaryOptions.classList.remove("visually-hidden"),e.gallery.classList.add("visually-hidden"),e.libary.classList.remove("visually-hidden")})),e.form.addEventListener("submit",(async function(e){e.preventDefault(),s.currentPage=1;const t=e.target.elements.input.value,a=await s.fetchByWord(t),n=await i(a);return await l(n)})),e.decrementBtn.addEventListener("click",(async function(){await s.decrementPage(),await d(),window.scroll({top:0,behavior:"smooth"})})),e.incrementBtn.addEventListener("click",(async function(){await s.incrementPage(),await d(),window.scroll({top:1,behavior:"smooth"})})),e.gallery.addEventListener("click",(async function(t){const a=t.target.getAttribute("id");if(s.currentId=a,t.target.classList.contains("gallery__item")){const t=await s.fetchById(a);e.backdrop.classList.remove("visually-hidden");const r=await n(t);await(i=r,void(e.backdrop.innerHTML=i))}var i;await(document.addEventListener("keydown",g),e.backdrop.addEventListener("click",m),e.backdrop.addEventListener("click",u),void e.backdrop.addEventListener("click",h))}));const s=new r,o=new t;async function d(){const e=await s.fetchByUrl(),t=await i(e);return await l(t)}function l(t){e.gallery.innerHTML=t}function u(e){"add-queue"===e.target.dataset.action&&(o.addInQueuedList(s.currentId),console.log(localStorage.getItem("queuedList")))}function h(e){"add-wached"===e.target.dataset.action&&(o.addInWatchedList(s.currentId),console.log(localStorage.getItem("watchedList")))}function m(e){"close-modal"!==e.target.dataset.action&&e.currentTarget!==e.target||y()}function g(e){"Escape"===e.code&&y()}function y(){e.backdrop.classList.add("visually-hidden"),document.removeEventListener("keydown",g),e.backdrop.removeEventListener("click",m),e.backdrop.removeEventListener("click",u),e.backdrop.removeEventListener("click",h)}
//# sourceMappingURL=index.1d4bdb9a.js.map
