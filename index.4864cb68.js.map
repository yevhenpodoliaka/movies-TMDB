{"mappings":"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","sources":["src/js/refs.js","src/js/local-storage.js","src/js/create-markup-list.js","src/js/modal.js","src/js/api-servise.js","src/js/app.js"],"sourcesContent":["export default {\n  gallery: document.querySelector('#gallery'),\n  libary: document.querySelector('#libary'),\n  homeBtn: document.querySelector('#homeBtn'),\n  libaryBtn: document.querySelector('#libaryBtn'),\n  form: document.querySelector('#form'),\n  errorInfo: document.querySelector('#errorInfo'),\n  libaryOptions: document.querySelector('#libaryOptions'),\n  decrementBtn: document.querySelector('#decrementBtn'),\n  incrementBtn: document.querySelector('#incrementBtn'),\n  backdrop: document.querySelector('.backdrop'),\n  addToQueue: null,\n  addWached: null,\n};\n","import refs from './refs';\n\nclass Storage {\n  constructor() {\n    this.watchedList = JSON.parse(localStorage.getItem('watchedList')) ?? [];\n    this.queuedList = JSON.parse(localStorage.getItem('queuedList')) ?? [];\n  }\n\n  addInWatchedList(id) {\n    this.watchedList.push(id);\n    localStorage.setItem('watchedList', JSON.stringify(this.watchedList));\n  }\n\n  addInQueuedList(id) {\n    this.queuedList.push(id);\n    localStorage.setItem('queuedList', JSON.stringify(this.queuedList));\n  }\n}\n\nexport default Storage;\n","const IMG_URL = 'https://image.tmdb.org/t/p/w500/';\nimport Storage from './local-storage';\nconst storage = new Storage();\n\nfunction createMarkupList(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        title,\n        poster_path,\n        release_date,\n        vote_average,\n      }) => `<li class=\"gallery__item\" id=\"${id}\">\n      <div class=\"info-wrap\">\n    <img src= ${IMG_URL}${poster_path} alt=\"\" class=\"poster\">\n    <p class=\"title\">${title}</p>\n    <p class=\"date\">Date: ${release_date}</p>\n    <p class=\"rating\">Rating :${vote_average}</p>\n    </div>\n</li>`\n    )\n    .join('');\n}\n\nexport default createMarkupList;\n","import Storage from './local-storage';\nimport refs from './refs';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '?api_key=b6201d5209ec246f483ea16253167a90';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500/';\nconst storage = new Storage();\n\nconsole.log(storage);\nasync function fetchById(movieId) {\n  const response = await fetch(BASE_URL + `movie/${movieId}` + API_KEY);\n  const data = await response.json();\n  return data;\n}\n\nasync function uppendModalMarkap(markup) {\n  refs.backdrop.innerHTML = markup;\n}\n\nasync function renderModal(filmId) {\n  refs.backdrop.setAttribute('id', filmId);\n  const data = await fetchById(filmId);\n  const markup = await createModalMarkup(data);\n  await uppendModalMarkap(markup);\n  refs.addToQueue = document.querySelector('.btn-add-queue');\n  refs.addWached = document.querySelector('.btn-add-wached');\n  if (storage.watchedList.includes(filmId)) {\n    refs.addWached.textContent = 'film in wached List';\n  }\n  if (storage.queuedList.includes(filmId)) {\n    refs.addToQueue.textContent = 'film in queue List';\n  }\n  openModal();\n}\nfunction createModalMarkup({\n  poster_path,\n  budget,\n  genres,\n  homepage,\n  vote_count,\n  vote_average,\n  original_title,\n  popularity,\n  title,\n  overview,\n}) {\n  return `<div class=\"modal\">\n    <button class=\"close-modal\" data-action=\"close-modal\">&#10006;</button>\n    <div class=\"img-wrap\">\n      <img class=\"card__img\" src=${IMG_URL}${poster_path} alt=\"cinema\" />\n    </div>\n    <div class=\"description-wrap\">\n      <h2 class=\"card__title\">${title}</h2>\n      <table class=\"card__info\">\n  <tr>\n    <td>Vote/votes</td>\n    <td><span>${vote_average}</span>/<span>${vote_count}</span></td>\n  </tr>\n  <tr>\n    <td>Popularity</td>\n    <td>${popularity}</td>\n  </tr>\n  <tr>\n    <td>Original Title</td>\n    <td>${original_title}</td>\n  </tr>\n  <tr>\n    <td>Genre</td>\n    <td>geners</td>\n  </tr>\n</table>\n    \n      <h3>About</h3>\n      <p class=\"card__about\">\n        ${overview}\n      </p>\n      <div class=\"card__option\">\n        <button class=\"btn-add-wached\" data-action=\"add-wached\">add to Watched</button>\n        <button class=\"btn-add-queue\" data-action=\"add-queue\">add to queue</button>\n      </div>\n    </div>\n  </div>`;\n}\nfunction onCloseEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBtnAddToQueueClick(e) {\n  console.log(refs);\n  if (e.target.dataset.action === 'add-queue') {\n    const filmId = e.currentTarget.getAttribute('id');\n    storage.addInQueuedList(filmId);\n    console.log(localStorage.getItem('queuedList'));\n  }\n}\nfunction onBtnAddWachedClick(e) {\n  console.log(refs);\n  if (e.target.dataset.action === 'add-wached') {\n    const filmId = e.currentTarget.getAttribute('id');\n    storage.addInWatchedList(filmId);\n    console.log(localStorage.getItem('watchedList'));\n  }\n}\nfunction onBtnCloseModalClick(e) {\n  if (\n    e.target.dataset.action === 'close-modal' ||\n    e.currentTarget === e.target\n  ) {\n    closeModal();\n  }\n}\nfunction closeModal() {\n  refs.backdrop.classList.add('visually-hidden');\n  document.removeEventListener('keydown', onCloseEsc);\n  refs.backdrop.removeEventListener('click', onBtnCloseModalClick);\n  refs.backdrop.removeEventListener('click', onBtnAddToQueueClick);\n  refs.backdrop.removeEventListener('click', onBtnAddWachedClick);\n}\nfunction openModal() {\n  refs.backdrop.classList.remove('visually-hidden');\n  document.addEventListener('keydown', onCloseEsc);\n  refs.backdrop.addEventListener('click', onBtnCloseModalClick);\n  refs.backdrop.addEventListener('click', onBtnAddToQueueClick);\n  refs.backdrop.addEventListener('click', onBtnAddWachedClick);\n}\nexport default renderModal;\n// backdrop_path: \"/egoyMDLqCxzjnSrWOz50uLlJWmD.jpg\"\n// belongs_to_collection: {id: 720879, name: \"Sonic the Hedgehog Collection\", poster_path: \"/rEC1pkQ1UbX7USRkVIrt2Nk7hlC.jpg\",…}\n// budget: 110000000\n// genres: [{id: 28, name: \"Action\"}, {id: 12, name: \"Adventure\"}, {id: 10751, name: \"Family\"},…]\n// homepage: \"https://www.sonicthehedgehogmovie.com\"\n// id: 675353\n// imdb_id: \"tt12412888\"\n// original_language: \"en\"\n// original_title: \"Sonic the Hedgehog 2\"\n// overview: \"After settling in Green Hills, Sonic is eager to prove he has what it takes to be a true hero. His test comes when Dr. Robotnik returns, this time with a new partner, Knuckles, in search for an emerald that has the power to destroy civilizations. Sonic teams up with his own sidekick, Tails, and together they embark on a globe-trotting journey to find the emerald before it falls into the wrong hands.\"\n// popularity: 3201.969\n// poster_path: \"/6DrHO1jr3qVrViUO6s6kFiAGM7.jpg\"\n// production_companies: [{id: 4, logo_path: \"/gz66EfNoYPqHTYI4q9UEN4CbHRc.png\", name: \"Paramount\", origin_country: \"US\"},…]\n// production_countries: [{iso_3166_1: \"JP\", name: \"Japan\"}, {iso_3166_1: \"US\", name: \"United States of America\"}]\n// release_date: \"2022-03-30\"\n// revenue: 393000000\n// runtime: 122\n// spoken_languages: [{english_name: \"English\", iso_639_1: \"en\", name: \"English\"}]\n// status: \"Released\"\n// tagline: \"Welcome to the next level.\"\n// title: \"Sonic the Hedgehog 2\"\n// video: false\n// vote_average: 7.7\n// vote_count: 2274\n","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = '?api_key=b6201d5209ec246f483ea16253167a90';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500/';\nconst URL = BASE_URL + 'discover/movie' + API_KEY + '&sort_by=popularity.desc';\nclass Search {\n  constructor() {\n    this.url = null;\n    this.currentPage = 1;\n    // this.currentId = null;\n  }\n\n  async fetchPopular() {\n    this.url = URL;\n    console.log(this);\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n\n  async fetchByWord(word) {\n    this.url = BASE_URL + 'search/movie' + API_KEY + `&query=${word}`;\n    console.log(this);\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n  async fetchByUrl() {\n    const response = await fetch(this.url + `&page=${this.currentPage}`);\n    const data = await response.json();\n    return data.results;\n  }\n\n  incrementPage() {\n    this.currentPage += 1;\n    console.log(this);\n  }\n  decrementPage() {\n    if (this.currentPage > 1) {\n      this.currentPage -= 1;\n      console.log(this);\n    }\n  }\n\n  // async fetchById(movieId) {\n  //   const response = await fetch(BASE_URL + `movie/${movieId}` + API_KEY);\n  //   const data = await response.json();\n  //   return data;\n  // }\n}\n\nexport default Search;\n","import createMarkupList from './create-markup-list';\nimport renderModal from './modal';\nimport refs from './refs';\nimport Search from './api-servise';\nimport Storage from './local-storage';\n\nwindow.addEventListener('DOMContentLoaded', onHomePage);\nrefs.homeBtn.addEventListener('click', onClickBtnHome);\nrefs.libaryBtn.addEventListener('click', onClickBtnLibary);\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.decrementBtn.addEventListener('click', onDecrementBtnClick);\nrefs.incrementBtn.addEventListener('click', onIncrementBtnClick);\nrefs.gallery.addEventListener('click', onCardClick);\n\nasync function onHomePage() {\n  const data = await search.fetchPopular();\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nconst search = new Search();\nconst storage = new Storage();\n\nasync function renderList() {\n  const data = await search.fetchByUrl();\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nfunction onClickBtnHome() {\n  refs.form.classList.remove('visually-hidden');\n  refs.libaryOptions.classList.add('visually-hidden');\n  refs.gallery.classList.remove('visually-hidden');\n  refs.libary.classList.add('visually-hidden');\n  onHomePage();\n}\n\nfunction onClickBtnLibary() {\n  refs.form.classList.add('visually-hidden');\n  refs.libaryOptions.classList.remove('visually-hidden');\n  refs.gallery.classList.add('visually-hidden');\n  refs.libary.classList.remove('visually-hidden');\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  search.currentPage = 1;\n  const query = e.target.elements.input.value;\n  const data = await search.fetchByWord(query);\n  console.log(data);\n  if (data.length === 0) {\n    refs.errorInfo.textContent =\n      'Search result not successful. Enter the correct movie name and ';\n    return;\n  }\n  const markup = await createMarkupList(data);\n  return await uppendMarkapGalleryList(markup);\n}\n\nasync function onDecrementBtnClick() {\n  await search.decrementPage();\n  await renderList();\n  window.scroll({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\nasync function onIncrementBtnClick() {\n  await search.incrementPage();\n  await renderList();\n  window.scroll({\n    top: 1,\n    behavior: 'smooth',\n  });\n}\n\nfunction uppendMarkapGalleryList(string) {\n  refs.gallery.innerHTML = string;\n}\n\n// ------Modal----------------\nasync function onCardClick(e) {\n  const filmId = e.target.getAttribute('id');\n  if (e.target.classList.contains('gallery__item')) {\n    await renderModal(filmId);\n  }\n  if (storage.watchedList.includes(filmId)) {\n  }\n  await console.log(refs);\n}\n"],"names":["$ee27a4d7c64fc8c4$export$2e2bcd8739ae039","gallery","document","querySelector","libary","homeBtn","libaryBtn","form","errorInfo","libaryOptions","decrementBtn","incrementBtn","backdrop","addToQueue","addWached","$8125d1701b78b442$export$2e2bcd8739ae039","addInWatchedList","id","this","watchedList","push","localStorage","setItem","JSON","stringify","addInQueuedList","queuedList","constructor","ref","ref1","parse","getItem","$c5622b0dc2fd209a$export$2e2bcd8739ae039","arr","map","title","poster_path","release_date","vote_average","join","$8a7e756c566dd1ea$var$storage","$8a7e756c566dd1ea$var$onCloseEsc","e","code","$8a7e756c566dd1ea$var$closeModal","$8a7e756c566dd1ea$var$onBtnAddToQueueClick","console","log","target","dataset","action","filmId","currentTarget","getAttribute","$8a7e756c566dd1ea$var$onBtnAddWachedClick","$8a7e756c566dd1ea$var$onBtnCloseModalClick","classList","add","removeEventListener","$8a7e756c566dd1ea$export$2e2bcd8739ae039","async","setAttribute","data","movieId","response","fetch","json","$8a7e756c566dd1ea$var$fetchById","markup","budget","genres","homepage","vote_count","original_title","popularity","overview","$8a7e756c566dd1ea$var$createModalMarkup","innerHTML","$8a7e756c566dd1ea$var$uppendModalMarkap","includes","textContent","remove","addEventListener","$73417752614b6260$export$2e2bcd8739ae039","url","$73417752614b6260$var$BASE_URL","currentPage","results","word","incrementPage","decrementPage","$ce77af30fc9a6e63$var$onHomePage","$ce77af30fc9a6e63$var$search","fetchPopular","$ce77af30fc9a6e63$var$uppendMarkapGalleryList","window","preventDefault","query","elements","input","value","fetchByWord","length","$ce77af30fc9a6e63$var$renderList","scroll","top","behavior","contains","$ce77af30fc9a6e63$var$storage","fetchByUrl","string"],"version":3,"file":"index.4864cb68.js.map"}