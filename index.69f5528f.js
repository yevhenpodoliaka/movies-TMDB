function t({id:t,backdrop_path:e,budget:a,genres:n,homepage:i}){return`<div class="card" id=${t}>\n  <button data-action="close-modal">close</button>\n  <button data-action="add-queue">Add to queue</button>\n  <button data-action="add-wached">Add Wached</button>\n  <img src=https://image.tmdb.org/t/p/w500/${e} alt="">\n\n</div>`}function e(t){return t.map((({id:t,title:e,poster_path:a,release_date:n,vote_average:i})=>`<li class="gallery__item" id="${t}">\n      <div class="info-wrap">\n    <img src= https://image.tmdb.org/t/p/w500/${a} alt="" class="poster">\n    <p class="title">${e}</p>\n    <p class="date">Date: ${n}</p>\n    <p class="rating">Rating :${i}</p>\n    </div>\n</li>`)).join("")}var a={gallery:document.querySelector("#gallery"),libary:document.querySelector("#libary"),homeBtn:document.querySelector("#homeBtn"),libaryBtn:document.querySelector("#libaryBtn"),form:document.querySelector("#form"),libaryOptions:document.querySelector("#libaryOptions"),decrementBtn:document.querySelector("#decrementBtn"),incrementBtn:document.querySelector("#incrementBtn"),card:null,backdrop:document.querySelector("#backdrop")};var n=class{async fetchPopular(){this.url="https://api.themoviedb.org/3/discover/movie?api_key=b6201d5209ec246f483ea16253167a90&sort_by=popularity.desc",console.log(this);const t=await fetch(this.url+`&page=${this.currentPage}`);return(await t.json()).results}async fetchByWord(t){this.url=`https://api.themoviedb.org/3/search/movie?api_key=b6201d5209ec246f483ea16253167a90&query=${t}`,console.log(this);const e=await fetch(this.url+`&page=${this.currentPage}`);return(await e.json()).results}async fetchByUrl(){const t=await fetch(this.url+`&page=${this.currentPage}`);return(await t.json()).results}async fetchById(t){const e=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=b6201d5209ec246f483ea16253167a90`);return await e.json()}incrementPage(){this.currentPage+=1,console.log(this)}decrementPage(){this.currentPage>1&&(this.currentPage-=1,console.log(this))}constructor(){this.url=null,this.currentPage=1,this.currentId=null}};async function i(){const t=await r.fetchPopular(),a=await e(t);return await s(a)}window.addEventListener("DOMContentLoaded",i),a.homeBtn.addEventListener("click",(function(){a.form.classList.remove("visually-hidden"),a.libaryOptions.classList.add("visually-hidden"),a.gallery.classList.remove("visually-hidden"),a.libary.classList.add("visually-hidden"),i()})),a.libaryBtn.addEventListener("click",(function(){a.form.classList.add("visually-hidden"),a.libaryOptions.classList.remove("visually-hidden"),a.gallery.classList.add("visually-hidden"),a.libary.classList.remove("visually-hidden")})),a.form.addEventListener("submit",(async function(t){t.preventDefault(),r.currentPage=1;const a=t.target.elements.input.value,n=await r.fetchByWord(a),i=await e(n);return await s(i)})),a.decrementBtn.addEventListener("click",(async function(){await r.decrementPage(),await c(),window.scroll({top:0,behavior:"smooth"})})),a.incrementBtn.addEventListener("click",(async function(){await r.incrementPage(),await c(),window.scroll({top:1,behavior:"smooth"})})),a.gallery.addEventListener("click",(async function(e){if(e.target.classList.contains("gallery__item")){const i=e.target.getAttribute("id"),c=await r.fetchById(i);r.currentId=i,a.backdrop.classList.remove("visually-hidden");const s=await t(c);a.card=document.querySelector(".card"),await(n=s,void(a.backdrop.innerHTML=n)),a.backdrop.addEventListener("click",l),a.backdrop.addEventListener("click",o),a.backdrop.addEventListener("click",d)}var n}));const r=new n;async function c(){const t=await r.fetchByUrl(),a=await e(t);return await s(a)}function s(t){a.gallery.innerHTML=t}function o(t){"add-queue"===t.target.dataset.action&&console.log(r.currentId)}function d(t){"add-wached"===t.target.dataset.action&&console.log(r.currentId)}function l(t){"close-modal"!==t.target.dataset.action&&t.currentTarget!==t.target||a.backdrop.classList.add("visually-hidden")}
//# sourceMappingURL=index.69f5528f.js.map
